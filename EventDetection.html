<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
    <head>
        <meta charset="utf-8">
        <!-- Tell the browser to be responsive to screen width -->
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
        <title>Twitter Dashboard</title>
        <!-- Esri CSS -->
        <link rel="stylesheet" href="https://js.arcgis.com/3.17/esri/css/esri.css">
        <!-- Bootstrap 3.3.5 -->
        <link rel="stylesheet" href="AdminLTE/bootstrap/css/bootstrap.min.css">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
        <!-- Ionicons -->
        <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
        <!-- Theme style -->
        <link rel="stylesheet" href="AdminLTE/dist/css/AdminLTE.css">
        <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
              page. However, you can choose any other skin. Make sure you
              apply the skin class to the body tag so the changes take effect.
        -->
        <link rel="stylesheet" href="AdminLTE/dist/css/skins/skin-blue-light.min.css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- Dashboard CSS -->
        <link rel="stylesheet" type="text/css" href="css/dashboard.css">
        <!-- Ionicons -->
        <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
        <!-- Ion Slider -->
        <link rel="stylesheet" href="AdminLTE/plugins/ionslider/ion.rangeSlider.css">
        <!-- ion slider Nice -->
        <link rel="stylesheet" href="AdminLTE/plugins/ionslider/ion.rangeSlider.skinNice.css">
        <!-- bootstrap slider -->
        <link rel="stylesheet" href="AdminLTE/plugins/bootstrap-slider/slider.css">
        <!-- Select 2 -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css" rel="stylesheet" />

    </head>
    <body class="hold-transition skin-blue-light sidebar-mini">
        <div class="wrapper">

            <!-- Main Header -->
            <header class="main-header">

                <!-- Logo -->
                <a href="#" class="logo">
                    <!-- mini logo for sidebar mini 50x50 pixels -->
                    <span class="logo-mini"><b>Yuki</b></span>
                    <!-- logo for regular state and mobile devices -->
                    <span class="logo-lg"><b>Event</b> of Twitter</span>
                </a>

                <!-- Header Navbar -->
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                    <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                        <span class="sr-only">Toggle navigation</span>
                    </a>
                    <!-- Navbar Right Menu -->
                    <div class="navbar-custom-menu">
                        <ul class="nav navbar-nav">
                            <!-- Control Sidebar Toggle Button -->
                            <li>
                                <a href="poster/IGTF_Poster.pdf" target="_blank"><i class="fa fa-image"></i> Poster on IGTF Conference</a>
                            </li>
                            <li>
                                <a href="Individual.html" target="_blank"><i class="fa fa-link"></i> Old Project</a>
                            </li>
                            <li>
                                <a href="#" data-toggle="control-sidebar">
                                    <i class="fa fa-book"></i> User Guide</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </header>
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar">
                <!-- sidebar: style can be found in sidebar.less -->
                <section class="sidebar">
                    <!-- Sidebar Menu -->
                    <ul class="sidebar-menu">
                        <li class="header">Select Data Source</li>
                        <!-- Optionally, you can add icons to the links -->
                        <li class="treeview city">
                            <a href="#"><i class="fa fa-map text-red"></i><span id="city-dropdown">City</span> <i class="fa fa-angle-left pull-right"></i></a>
                            <ul id="cities" class="treeview-menu">
                                <li id="west_lafayette"><a  href="#">West Lafayette</a></li>
                                <!--                                <li id="bloomington" class="disabled"><a href="#">Bloomington</a></li>
                                                                <li id="ann_arbor" class="disabled"><a href="#">Ann Arbor</a></li>-->
                            </ul>
                        </li>
                        <li class="treeview calendar">
                            <a href="#"><i class="fa fa-calendar text-yellow"></i><span id="year-dropdown">Year</span> <i class="fa fa-angle-left pull-right"></i></a>
                            <ul id="years" class="treeview-menu">
                                <li id="2014"><a href="#">2014</a></li>
                                <li id="2015"><a href="#">2015</a></li>
                            </ul>
                        </li>
                        <li class="treeview calendar">
                            <a href="#"><i class="fa fa-calendar text-yellow"></i><span id="month-dropdown">Month</span> <i class="fa fa-angle-left pull-right"></i></a>
                            <ul id="months" class="treeview-menu">
                            </ul>
                        </li>
                    </ul>
                    <!-- /.sidebar-menu -->
                </section>
                <!-- /.sidebar -->
            </aside>

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <!--    <section class="content-header">
                      <h1>
                        Page Header
                        <small>Optional description</small>
                      </h1>
                      <ol class="breadcrumb">
                        <li><a href="#"><i class="fa fa-dashboard"></i> Level</a></li>
                        <li class="active">Here</li>
                      </ol>
                    </section>-->

                <!-- Main content -->
                <section class="content">
                    <!-- Boxes -->

                    <section class="col-lg-6 ">
                        <!-- Map -->
                        <div class="box box-info load">
                            <div class="box-header with-border">
                                <h3 class="box-title">Main Map</h3>
                                <div class="box-tools pull-right">
                                    <button class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- /.box-header -->
                            <div id="main_map" class="box-body">
                                <div id="map" class="map"></div>
                                <input id="date_picker" type="text" value="" class="slider form-control" data-slider-min="1" data-slider-max="31" data-slider-step="1" data-slider-value="[1,31]" data-slider-orientation="horizontal" data-slider-selection="before" data-slider-tooltip="show" data-slider-id="red">  
                                <div id="legend" class="legend"></div>
                            </div>
                            <!-- /.box-body -->
                            <!-- Loading (remove when finished) -->
                            <!-- 
                            <div class="overlay">
                                <i class="fa fa-refresh fa-spin"></i>
                            </div>
                            -->
                            <!-- end loading -->
                        </div>
                    </section>

                    <section class="col-lg-6">
                        <!-- Daily Time Chart -->
                        <div class="box box-info load">
                            <div class="box-header with-border">
                                <h3 class="box-title">Monthly Temporal Distribution</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div id="month_chart" class="time_chart">
                                </div>
                            </div>
                            <!-- /.box-body -->
                        </div>
                    </section>

                    <section class="col-lg-6 ">
                        <!-- Detail Map -->
                        <div class="box box-danger">
                            <div class="box-header with-border">
                                <h3 class="box-title">Spatial Pattern of Cluster</h3>
                                <div class="box-tools pull-right">
                                    <button class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- /.box-header -->
                            <div class="box-body">
                                <div id="submap" class="map"></div>
                            </div>
                        </div>
                    </section>

                    <section class="col-lg-6 ">
                        <!-- Cluster Time Chart -->
                        <div class="box box-danger">
                            <div class="box-header with-border">
                                <h3 class="box-title">Temporal Pattern of Cluster</h3>
                                <div class="box-tools pull-right">
                                    <button class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- /.box-header -->
                            <div class="box-body">
                                <div id="cluster_timeChart" class="time_chart"></div>
                            </div>
                        </div>
                    </section>

                    <section class="col-lg-6 ">
                        <!-- Word Frequency Chart -->
                        <div class="box box-warning">
                            <div class="box-header with-border">
                                <h3 class="box-title">Word Frequency</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div id="cluster_wordChart" class="word_chart">
                                </div>
                            </div>
                            <!-- /.box-body -->
                        </div>
                    </section>

                    <section class="col-lg-6">
                        <!-- Related Tweets information -->
                        <div class="box box-success">
                            <div class="box-header with-border">
                                <h3 class="box-title">Text Info</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div id="twitter_text" class="text">

                                </div>
                            </div>
                            <!-- /.box-body -->
                        </div>
                    </section>

                    <!--                    <section class="col-lg-6 ">
                                             Temporal Pattern with Top Words Only 
                                            <div class="box box-warning">
                                                <div class="box-header with-border">
                                                    <h3 class="box-title">Temporal Pattern of Hot Words</h3>
                                                    <div class="box-tools pull-right">
                                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                                    </div>
                                                </div>
                                                <div class="box-body">
                                                    <div id="hotword_timeChart" class="time_chart">
                                                    </div>
                                                </div>
                                                 /.box-body 
                                            </div>
                                        </section>-->


                    <section class="col-lg-12">
                        <!-- Dynamic Map with time interval -->
                        <div class="box box-success">
                            <div class="box-header with-border">
                                <h3 class="box-title">Dynamic Map</h3>
                                <button id="plot-temporal-map" class="btn btn-primary"><i class='fa fa-play'></i> Play</button>
                                <br/> 
                                <select id="interval_selector" class="selector" style="width: 100px">
                                    <option value='1'> 1 </option>
                                    <option value='2'> 2 </option>
                                    <option value='5' selected> 5 </option>
                                    <option value='10'> 10 </option>
                                    <option value='15'> 15 </option>
                                    <option value='20'> 20 </option>
                                    <option value='30'> 30 </option>
                                    <option value='60'> 60 </option>
                                </select>  Minutes / map
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div id="dynamic_map" class="map">
                                </div>
                                <div id="switch" class="switch">
                                    <strong><a id="time_stamp"></a></strong>
                                </div>
                            </div>
                            <!-- /.box-body -->
                        </div>
                    </section>

                    <section class="col-lg-12 ">
                        <!-- Topics -->
                        <div class="box box-success">
                            <div class="box-header with-border">
                                <h3 class="box-title">Topics Clustering</h3>
                                <button id="topic-clustering" class="btn btn-primary"><i class='fa fa-play'></i> Run</button>
                                <button id="topic-clear" class="btn btn-danger"><i class='fa fa-remove'></i> Clear</button>
                                <br/>
                                <select id="numberOfTopics" class="selector" style="width: 100px">
                                    <option value='2' selected> 2 </option>
                                    <option value='3'> 3 </option>
                                    <option value='4'> 4 </option>
                                    <option value='5'> 5 </option>
                                    <option value='6'> 6 </option>
                                    <!--                                    <option value='7'> 7 </option>
                                                                        <option value='8'> 8 </option>-->
                                </select> Topics
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>    
                                </div>
                            </div>
                            <div class="box-body">
                                <!-- Words of Topic -->
                                <div id="topics" class="row">
                                    <!-- Topics -->
                                    <!--                                    <section class="col-lg-4">
                                                                        <div class="box box-success">
                                                                            <div class="box-header with-border">
                                                                                <h3 class="box-title">Topic 1</h3>
                                                                            </div>
                                                                            <div id="topic-1" class="box-body">
                                                                            </div>
                                                                        </div>
                                                                        </section>
                                                                    </div>
                                    <!-- Sentence Category -->
                                    <div id="sentences" class="topic inline">
                                    </div>
                                </div>
                                <!-- /.box-body -->
                            </div>
                    </section>


                    <!-- Your Page Content Here -->


                    <section class="col-lg-4 ">
                        <!-- Dummy Stuff -->
                        <div id="scalebar-MainMap" class="scalebar"></div>
                        <div id="dummymap-MainMap" class="dummymap"></div>
                        <div id="scalebar-SubMap" class="scalebar"></div>
                        <div id="dummymap-SubMap" class="dummymap"></div>
                        <div id="scalebar-DynamicMap" class="scalebar"></div>
                        <div id="dummymap-DynamicMap" class="dummymap"></div>
                    </section>

                </section>
                <!-- /.content -->

            </div>
            <!-- /.content-wrapper -->



            <!-- Main Footer -->
            <!-- Main Footer -->
            <footer class="main-footer">
                <!-- Default to the left -->
                <strong>Copyright &copy; 2016 <a href="https://www.linkedin.com/in/yukihuang" target="_blank">
                        Yuki Huang</a>.</strong> All rights reserved.
            </footer>

            <aside class="control-sidebar control-sidebar-dark" style="position: fixed; height: auto;">
                <!-- Create the tabs -->
                <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
                    <li class="active"><a href="#control-sidebar-wrench-tab" data-toggle="tab" aria-expanded="true">
                            <i class="fa fa-home" style="font-size: 24px"></i></a>
                    </li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <!-- Home tab content -->
                    <div class="tab-pane active" id="control-sidebar-wrench-tab">
                        <h3 class="control-sidebar-heading">Welcome!</h3>
                        <div class="form-group">
                            <p class="control-sidebar-subheading">
                                Hey, this is a dashboard-like App for event detection 
                                by Twitter Information, which is a new way 
                                to implement GIS ideas on social media data. 
                                Hope you could have as much fun as I have.
                            </p>
                            <p class="control-sidebar-subheading">
                                Cheers !
                            </p>
                        </div>
                        <ul class="control-sidebar-menu">
                            <li class="tutorial tutorial-city">
                                <a href="#">
                                    <i class="menu-icon fa fa-map bg-red-gradient"></i>
                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Select City
                                            <br />
                                            Only West Lafayette is avaliable right now.</h4>
                                    </div>
                                </a>
                            </li>
                            <li class="tutorial tutorial-calendar">
                                <a href="#">
                                    <i class="menu-icon fa fa-calendar bg-yellow-gradient"></i>
                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Select Year
                                            <br />
                                            Month list will be generated automatically 
                                            and sorted by activity level, then
                                            go and pick a month.</h4>
                                    </div>
                                </a>
                            </li>
                            <li class="tutorial tutorial-box">
                                <a href="#">
                                    <i class="menu-icon fa fa-dashboard bg-green-gradient"></i>
                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Box
                                            <br />
                                            There are 8 boxes in total. Pick the 
                                            cluster you are interested in on Main Map 
                                            and start your Twitter journey !</h4>
                                    </div>
                                </a>
                            </li>
                            <li class="tutorial tutorial-slider-legend">
                                <a href="#">
                                    <i class="menu-icon fa fa-wrench bg-aqua-gradient"></i>
                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Slider and Checkboxs
                                            <br />
                                            Slider could select the range of the dates in a month, 
                                            while checkboxs could filter the clusters by importance.</h4>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.linkedin.com/in/yukihuang" target="_blank">
                                    <i class="menu-icon fa fa-envelope bg-purple-gradient"></i>
                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">About Me
                                            <br />
                                            Check My Profile on Linkedin.</h4>
                                    </div>
                                </a>
                            </li>
                            <!--<li>
                                <a href="mailto:huang711@purdue.edu?Subject=Something%20about%20Twitter%20Dashboard" target="_top">
                                    <i class="menu-icon fa fa-envelope bg-green"></i>

                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Feel Free to Contact !</h4>

                                        <p>I'm glad to hear from you ~</p>
                                    </div>
                                </a>
                            </li>-->
                        </ul>
                        <!-- /.control-sidebar-menu -->
                    </div>
                    <!-- /.tab-pane -->
                </div>
            </aside>
            <!-- Add the sidebar's background. This div must be placed immediately after the control sidebar -->
            <div class="control-sidebar-bg" style="position: fixed; height: auto;"></div>
        </div>
        <!-- ./wrapper -->


        <!-- REQUIRED JS SCRIPTS -->

        <!-- jQuery 2.1.4 -->
        <script src="AdminLTE/plugins/jQuery/jQuery-2.1.4.min.js"></script>
        <!--jQuery Color-->
        <script src="js/jquery-color/jquery.color.js"></script>
        <!-- Bootstrap 3.3.5 -->
        <script src="AdminLTE/bootstrap/js/bootstrap.min.js"></script>
        <!-- AdminLTE App -->
        <script src="AdminLTE/dist/js/app.min.js"></script>
        <!-- Chart -->
        <script src="AdminLTE/plugins/chartjs/Chart.min.js"></script>
        <!-- FastClick -->
        <script src="AdminLTE/plugins/fastclick/fastclick.js"></script>
        <!-- Slimscroll -->
        <script src="AdminLTE/plugins/slimScroll/jquery.slimscroll.js"></script>
        <!-- Check -->
        <script src="AdminLTE/plugins/iCheck/icheck.js"></script>
        <!-- Ion Slider -->
        <script src="AdminLTE/plugins/ionslider/ion.rangeSlider.min.js"></script>
        <!-- Bootstrap slider -->
        <script src="AdminLTE/plugins/bootstrap-slider/bootstrap-slider.js"></script>
        <!-- Select 2 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
        <script>
            var AdminLTEOptions = {
                //Add slimscroll to navbar menus
                //This requires you to load the slimscroll plugin
                //in every page before app.js
                navbarMenuSlimscroll: true,
                navbarMenuSlimscrollWidth: "3px", //The width of the scroll bar
                navbarMenuHeight: "200px", //The height of the inner menu
                //General animation speed for JS animated elements such as box collapse/expand and
                //sidebar treeview slide up/down. This options accepts an integer as milliseconds,
                //'fast', 'normal', or 'slow'
                animationSpeed: 500,
                //Sidebar push menu toggle button selector
                sidebarToggleSelector: "[data-toggle='offcanvas']",
                //Activate sidebar push menu
                sidebarPushMenu: true,
                //Activate sidebar slimscroll if the fixed layout is set (requires SlimScroll Plugin)
                sidebarSlimScroll: true,
                //Enable sidebar expand on hover effect for sidebar mini
                //This option is forced to true if both the fixed layout and sidebar mini
                //are used together
                sidebarExpandOnHover: false,
                //BoxRefresh Plugin
                enableBoxRefresh: true,
                //Bootstrap.js tooltip
                enableBSToppltip: true,
                BSTooltipSelector: "[data-toggle='tooltip']",
                //Enable Fast Click. Fastclick.js creates a more
                //native touch experience with touch devices. If you
                //choose to enable the plugin, make sure you load the script
                //before AdminLTE's app.js
                enableFastclick: true,
                //Control Sidebar Options
                enableControlSidebar: true,
                controlSidebarOptions: {
                    //Which button should trigger the open/close event
                    toggleBtnSelector: "[data-toggle='control-sidebar']",
                    //The sidebar selector
                    selector: ".control-sidebar",
                    //Enable slide over content
                    slide: true // ***cover or not***
                },
                //Box Widget Plugin. Enable this plugin
                //to allow boxes to be collapsed and/or removed
                enableBoxWidget: true,
                //Box Widget plugin options
                boxWidgetOptions: {
                    boxWidgetIcons: {
                        //Collapse icon
                        collapse: 'fa-minus',
                        //Open icon
                        open: 'fa-plus',
                        //Remove icon
                        remove: 'fa-times'
                    },
                    boxWidgetSelectors: {
                        //Remove button selector
                        remove: '[data-widget="remove"]',
                        //Collapse button selector
                        collapse: '[data-widget="collapse"]'
                    }
                },
                //Direct Chat plugin options
                directChat: {
                    //Enable direct chat by default
                    enable: true,
                    //The button to open and close the chat contacts pane
                    contactToggleSelector: '[data-widget="chat-pane-toggle"]'
                },
                //Define the set of colors to use globally around the website
                colors: {
                    lightBlue: "#3c8dbc",
                    red: "#f56954",
                    green: "#00a65a",
                    aqua: "#00c0ef",
                    yellow: "#f39c12",
                    blue: "#0073b7",
                    navy: "#001F3F",
                    teal: "#39CCCC",
                    olive: "#3D9970",
                    lime: "#01FF70",
                    orange: "#FF851B",
                    fuchsia: "#F012BE",
                    purple: "#8E24AA",
                    maroon: "#D81B60",
                    black: "#222222",
                    gray: "#d2d6de"
                },
                //The standard screen sizes that bootstrap uses.
                //If you change these in the variables.less file, change
                //them here too.
                screenSizes: {
                    xs: 480,
                    sm: 768,
                    md: 992,
                    lg: 1200
                }
            };
        </script>


        <!-- Google Map -->
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAO9lTKIiNT6vVJiAnNZ-JiGyMDgbPeZfA&signed_in=false&libraries=visualization">
        </script>
        <!-- Esri API -->
        <script src="http://js.arcgis.com/3.17/"></script>
        <script>var dojoConfig = {parseOnLoad: true};</script>
        <!-- Canvas JS -->
        <script src="./canvasjs/canvasjs.min.js"></script>
        <!-- ST-DBSCAN Lib -->
        <script src="js/clustering/st_dbscan.js"></script>
        <!-- Word Frequency -->
        <script src="js/utilities/word-freq.js"></script>
        <!-- Sort Json -->
        <script src="js/utilities/sort-json.js"></script>
        <script>
            var wf = require('word-freq');
        </script>
        <!-- Plot Canvas -->
        <script src="js/dashboard/plot-canvas.js"></script>
        <!-- LDA -->
        <script src="js/lda/stopwords.js"></script>
        <script src="js/lda/lda.js"></script>
        <!-- Main JS Lib -->
        <script src="js/dashboard/main.js"></script>

        <script>
            $(document).ready(function () {
                /* dojo related */
                dojo.require("dojo.parser");
                dojo.require("esri.dijit.Scalebar");
                dojo.require("esri.map");
                dojo.require("esri.geometry.Point");

                /* Global Variables */
                city = null;
                year = null;
                month = null;

                bias_x = null;
                bias_y = null;
                map_center = {lat: null, lng: null};
                cities = {
                    west_lafayette: {
                        bias_x: -9684795,
                        bias_y: 4924240,
                        lat: 40.44,
                        lng: -86.92,
                    },
                    bloomington: {
                        bias_x: -9642416,
                        bias_y: 4736412,
                        lat: 39.15,
                        lng: -86.54
                    },
                    ann_arbor: {
                        bias_x: -9329043,
                        bias_y: 5194144,
                        lat: 42.28,
                        lng: -83.74
                    }
                };

                /* select city */
                $('#cities').children().each(function () {
                    $(this).on('click', function () {
                        // $(this).attr('id') is the name of city
                        // could only use this way to call
                        city = $(this).attr('id');  // name of selected city
                        $('#city-dropdown').html('City: ' + $(this).children().html()); // change list head
                        /* Assign Global Variables */
                        bias_x = cities[city].bias_x;
                        bias_y = cities[city].bias_y;
                        map_center.lat = cities[city].lat;
                        map_center.lng = cities[city].lng;
                        month_url = 'php/' + city + '/get_Month_ID.php';  // URL get month ID
                        month_ST_url = 'php/' + city + '/get_Month_ST.php';  // URL get month ST

                        initMap(); // init map
                        dojo.ready(initDummy);  // init dummy map
                        if (year !== null) {
                            orderMonth();
                        }  // init month order
                    });
                });

                /* select year */
                $('#years').children().each(function () {
                    $(this).on('click', function () {
                        // $(this).attr('id') is the val of year
                        year = $(this).attr('id');  // name of selected year
                        $("#year-dropdown").html("Year: " + year);  // change list head

                        if (city !== null) {
                            orderMonth();
                        }  // init month order
                    });
                });


                /* init month order */
                function orderMonth() {
                    $.post(month_url, {year: year}, function (data) {
                        // clear old list
                        $('#months').empty();
                        var month_details = eval(data);
                        for (var i = 0; i < month_details.length; i++) {
                            var temp_id = month_details[i].month;
                            var temp_num = month_details[i].num;
                            // Construct the elements for html
                            var ul = document.getElementById("months");
                            var li = document.createElement("li");
                            var a = document.createElement("a");
                            a.appendChild(document.createTextNode(temp_id));
                            a.setAttribute("num", temp_num);
                            a.setAttribute('class', 'month');
                            a.setAttribute("href", "#");
                            li.setAttribute("id", temp_id);
                            li.addEventListener("click", fetchMonth);
                            li.appendChild(a);
                            ul.appendChild(li);
                        }

                        /* select month */
                        $('#months').children().each(function () {
                            $(this).on('click', function () {
                                // $(this).attr('id') is the val of year
                                month = $(this).attr('id');  // name of selected year
                                $("#month-dropdown").html("Month: " + month);  // change list head
                                fetchMonth(year, month);  // start event detection
                            });
                        });

                    });
                }


                /*  check the height of the window */
                if ($(document.body).height() > 680) {
                    $(".content-wrapper").height($(document.body).height());
                } else {
                    $(".content-wrapper").height(680);
                }

                /* init slider */
                $('#date_picker').slider();

                /* init selector */
                $(document).ready(function () {
                    $(".selector").select2({
                        theme: "classic"
                    });
                });

                /* Topic Clustering */
                $('#topic-clustering').click(function () {
                    textController.toTopic();
                    $(".content-wrapper").height($(document.body).height());
                });

                /* Clear */
                $('#topic-clear').click(function () {
                    $('#topics').html("");
                });

                /* plot dynamic map */
                $("#plot-temporal-map").click(function () {
                    dynamicMapController.run();
                });


                /* animation of tutorial */
                // city
                $(".tutorial-city").on('click', function () {
                    var bc = jQuery('.city').css('backgroundColor');
                    jQuery('.city').animate({backgroundColor: AdminLTEOptions.colors.red}, 600);
                    jQuery('.city').animate({backgroundColor: bc}, 400);
                });
                // calendar
                $(".tutorial-calendar").on('click', function () {
                    var bc = jQuery('.calendar').css('backgroundColor');
                    jQuery('.calendar').animate({backgroundColor: AdminLTEOptions.colors.yellow}, 600);
                    jQuery('.calendar').animate({backgroundColor: bc}, 400);
                });
                // box
                $(".tutorial-box").on('click', function () {
                    $('.content').fadeTo(600, 0);
                    $('.content').fadeTo(400, 1);
                });
                // slider and legend
                $(".tutorial-slider-legend").on('click', function () {
                    var bc = jQuery('.slider').css('backgroundColor');
                    jQuery('.slider').animate({backgroundColor: AdminLTEOptions.colors.aqua}, 600);
                    jQuery('.slider').animate({backgroundColor: bc}, 400);
                    $('.legend').fadeTo(600, 0);
                    $('.legend').fadeTo(400, 1);
                });
                /* end animation of tutorial */

            });
        </script>
    </body>
</html>
